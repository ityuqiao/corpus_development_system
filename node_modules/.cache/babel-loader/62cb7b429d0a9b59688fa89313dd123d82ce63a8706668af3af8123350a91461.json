{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport t from \"vue\";\nimport { createEditor as e, DomEditor as o, createToolbar as r } from \"@wangeditor/editor\";\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar n = function () {\n  return n = Object.assign || function (t) {\n    for (var e, o = 1, r = arguments.length; o < r; o++) for (var n in e = arguments[o]) Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n    return t;\n  }, n.apply(this, arguments);\n};\nfunction i(t) {\n  var e = \"请使用 '@\".concat(t, \"' 事件，不要放在 props 中\");\n  return e += \"\\nPlease use '@\".concat(t, \"' event instead of props\");\n}\nvar a = t.extend({\n    render: function (t) {\n      return t(\"div\", {\n        ref: \"box\"\n      });\n    },\n    name: \"Editor\",\n    data: function () {\n      return {\n        curValue: \"\",\n        editor: null\n      };\n    },\n    props: [\"defaultContent\", \"defaultConfig\", \"mode\", \"defaultHtml\", \"value\"],\n    mounted: function () {\n      this.create();\n    },\n    watch: {\n      value: function (t) {\n        t === this.curValue || this.setHtml(t);\n      }\n    },\n    methods: {\n      setHtml: function (t) {\n        var e = this.editor;\n        null != e && e.setHtml(t);\n      },\n      create: function () {\n        var t = this;\n        if (null != this.$refs.box) {\n          var o = this.defaultConfig || {},\n            r = JSON.stringify(Array.isArray(this.defaultContent) ? this.defaultContent : []);\n          e({\n            selector: this.$refs.box,\n            html: this.defaultHtml || this.value || \"\",\n            config: n(n({}, o), {\n              onCreated: function (e) {\n                if (t.editor = Object.seal(e), t.$emit(\"onCreated\", e), o.onCreated) {\n                  var r = i(\"onCreated\");\n                  throw new Error(r);\n                }\n              },\n              onChange: function (e) {\n                var r = e.getHtml();\n                if (t.curValue = r, t.$emit(\"input\", r), t.$emit(\"onChange\", e), o.onChange) {\n                  var n = i(\"onChange\");\n                  throw new Error(n);\n                }\n              },\n              onDestroyed: function (e) {\n                if (t.$emit(\"onDestroyed\", e), o.onDestroyed) {\n                  var r = i(\"onDestroyed\");\n                  throw new Error(r);\n                }\n              },\n              onMaxLength: function (e) {\n                if (t.$emit(\"onMaxLength\", e), o.onMaxLength) {\n                  var r = i(\"onMaxLength\");\n                  throw new Error(r);\n                }\n              },\n              onFocus: function (e) {\n                if (t.$emit(\"onFocus\", e), o.onFocus) {\n                  var r = i(\"onFocus\");\n                  throw new Error(r);\n                }\n              },\n              onBlur: function (e) {\n                if (t.$emit(\"onBlur\", e), o.onBlur) {\n                  var r = i(\"onBlur\");\n                  throw new Error(r);\n                }\n              },\n              customAlert: function (e, r) {\n                if (t.$emit(\"customAlert\", e, r), o.customAlert) {\n                  var n = i(\"customAlert\");\n                  throw new Error(n);\n                }\n              },\n              customPaste: function (e, r) {\n                if (o.customPaste) {\n                  var n = i(\"customPaste\");\n                  throw new Error(n);\n                }\n                var a;\n                return t.$emit(\"customPaste\", e, r, function (t) {\n                  a = t;\n                }), a;\n              }\n            }),\n            content: JSON.parse(r),\n            mode: this.mode || \"default\"\n          });\n        }\n      }\n    }\n  }),\n  u = t.extend({\n    name: \"Toolbar\",\n    render: function (t) {\n      return t(\"div\", {\n        ref: \"box\"\n      });\n    },\n    props: [\"editor\", \"defaultConfig\", \"mode\"],\n    methods: {\n      create: function (t) {\n        null != this.$refs.box && null != t && (o.getToolbar(t) || r({\n          editor: t,\n          selector: this.$refs.box,\n          config: this.defaultConfig || {},\n          mode: this.mode || \"default\"\n        }));\n      }\n    },\n    watch: {\n      editor: {\n        handler: function (t) {\n          null != t && this.create(t);\n        },\n        immediate: !0\n      }\n    }\n  });\nexport { a as Editor, u as Toolbar };","map":{"version":3,"names":["i","t","e","concat","a","extend","render","ref","name","data","curValue","editor","props","mounted","create","watch","value","setHtml","methods","$refs","box","o","defaultConfig","r","JSON","stringify","Array","isArray","defaultContent","selector","html","defaultHtml","config","n","onCreated","Object","seal","$emit","Error","onChange","getHtml","onDestroyed","onMaxLength","onFocus","onBlur","customAlert","customPaste","content","parse","mode","u","getToolbar","handler","immediate","Editor","Toolbar"],"sources":["../src/components/Editor.vue","../src/components/Toolbar.vue"],"sourcesContent":["<script lang=\"ts\">\nimport Vue from 'vue';\nimport { createEditor } from '@wangeditor/editor';\n\nfunction genErrorInfo(fnName: string) {\n  let info = `请使用 '@${fnName}' 事件，不要放在 props 中`;\n  info += `\\nPlease use '@${fnName}' event instead of props`;\n  return info;\n}\n\nexport default Vue.extend({\n  //【注意】单独写 <template>...</template> 时，rollup 打包完浏览器运行时报错，所以先在这里写 template\n  render(h) {\n    return h('div', { ref: 'box' });\n  },\n  name: 'Editor',\n  data() {\n    return {\n      curValue: '',\n      editor: null,\n    };\n  },\n  props: ['defaultContent', 'defaultConfig', 'mode', 'defaultHtml', 'value'], // value 用于自定义 v-model\n  mounted() {\n    this.create();\n  },\n  watch: {\n    // 监听 'value' 属性变化 - value 用于自定义 v-model\n    value(newVal) {\n      const isEqual = newVal === this.curValue;\n      if (isEqual) return; // 和当前内容一样，则忽略\n\n      // 重置 HTML\n      this.setHtml(newVal);\n    },\n  },\n  methods: {\n    // 重置 HTML\n    setHtml(newHtml: string) {\n      const editor = this.editor as any;\n      if (editor == null) return;\n      editor.setHtml(newHtml);\n    },\n\n    // 创建 editor\n    create() {\n      if (this.$refs.box == null) return;\n\n      const defaultConfig = this.defaultConfig || {};\n\n      const defaultContent = JSON.stringify(\n        Array.isArray(this.defaultContent) ? this.defaultContent : []\n      );\n\n      createEditor({\n        selector: this.$refs.box as Element,\n        html: this.defaultHtml || this.value || '',\n        config: {\n          ...defaultConfig,\n          onCreated: (editor) => {\n            this.editor = Object.seal(editor) as any; // 注意，一定要用 Object.seal() 否则会报错\n\n            this.$emit('onCreated', editor);\n            if (defaultConfig.onCreated) {\n              const info = genErrorInfo('onCreated');\n              throw new Error(info);\n            }\n          },\n          onChange: (editor) => {\n            const editorHtml = editor.getHtml();\n            this.curValue = editorHtml; // 记录当前 html 内容\n            this.$emit('input', editorHtml); // 用于自定义 v-model\n\n            this.$emit('onChange', editor);\n            if (defaultConfig.onChange) {\n              const info = genErrorInfo('onChange');\n              throw new Error(info);\n            }\n          },\n          onDestroyed: (editor) => {\n            this.$emit('onDestroyed', editor);\n            if (defaultConfig.onDestroyed) {\n              const info = genErrorInfo('onDestroyed');\n              throw new Error(info);\n            }\n          },\n          onMaxLength: (editor) => {\n            this.$emit('onMaxLength', editor);\n            if (defaultConfig.onMaxLength) {\n              const info = genErrorInfo('onMaxLength');\n              throw new Error(info);\n            }\n          },\n          onFocus: (editor) => {\n            this.$emit('onFocus', editor);\n            if (defaultConfig.onFocus) {\n              const info = genErrorInfo('onFocus');\n              throw new Error(info);\n            }\n          },\n          onBlur: (editor) => {\n            this.$emit('onBlur', editor);\n            if (defaultConfig.onBlur) {\n              const info = genErrorInfo('onBlur');\n              throw new Error(info);\n            }\n          },\n          customAlert: (info, type) => {\n            this.$emit('customAlert', info, type);\n            if (defaultConfig.customAlert) {\n              const info = genErrorInfo('customAlert');\n              throw new Error(info);\n            }\n          },\n          customPaste: (editor, event) => {\n            if (defaultConfig.customPaste) {\n              const info = genErrorInfo('customPaste');\n              throw new Error(info);\n            }\n            let res;\n            this.$emit('customPaste', editor, event, (val: any) => {\n              res = val;\n            });\n            return res;\n          },\n        },\n        content: JSON.parse(defaultContent),\n        mode: this.mode || 'default',\n      });\n    },\n  },\n});\n</script>\n","<script lang=\"ts\">\nimport Vue from 'vue';\nimport { createToolbar, DomEditor } from '@wangeditor/editor';\n\nexport default Vue.extend({\n  name: 'Toolbar',\n  render(h) {\n    return h('div', { ref: 'box' });\n  },\n  props: ['editor', 'defaultConfig', 'mode'],\n  methods: {\n    // 创建 toolbar\n    create(editor: any) {\n      if (this.$refs.box == null) return;\n      if (editor == null) return;\n      if (DomEditor.getToolbar(editor)) return // 不重复创建\n\n      createToolbar({\n        editor,\n        selector: this.$refs.box as Element,\n        config: this.defaultConfig || {},\n        mode: this.mode || 'default',\n      });\n    },\n  },\n  watch: {\n    editor: {\n      handler(e) {\n        if (e == null) return;\n        this.create(e);\n      },\n      immediate: true,\n    }\n  }\n});\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}